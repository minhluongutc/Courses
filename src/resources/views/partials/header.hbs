<nav class='navbar navbar-expand-lg navbar-dark bg-dark'>
    <div class='container'>
        <a class='navbar-brand' href='/home'>API</a>
        <button
            class='navbar-toggler'
            type='button'
            data-toggle='collapse'
            data-target='#navbarSupportedContent'
            aria-controls='navbarSupportedContent'
            aria-expanded='false'
            aria-label='Toggle navigation'
        >
            <span class='navbar-toggler-icon'></span>
        </button>
        {{#if loggedInUser}}
            {{#if (eq loggedInUser.role "admin")}}
            <div class='collapse navbar-collapse' id='navbarSupportedContent'>
                <ul class='navbar-nav ml-auto'>
                    <li class='nav-item dropdown'>
                        <a
                            class='nav-link dropdown-toggle'
                            href='#'
                            id='navbarDropdown'
                            role='button'
                            data-toggle='dropdown'
                            aria-haspopup='true'
                            aria-expanded='false'
                        >
                            <img
                                src='https://scontent.fhan2-3.fna.fbcdn.net/v/t39.30808-1/280348934_1002333543743548_7154129552959451706_n.jpg?stp=cp0_dst-jpg_p40x40&_nc_cat=102&ccb=1-7&_nc_sid=7206a8&_nc_ohc=Ai17CyZvED4AX8OC8nQ&_nc_ht=scontent.fhan2-3.fna&oh=00_AfDlSnDEgF_jTbEbbSqWZGtSLm3sAZNTWCnLxMdwek1eKA&oe=643DCB29'
                                alt=''
                                class='user-avatar'
                            />
                            {{loggedInUser.username}}
                        </a>
                        <div class='dropdown-menu' aria-labelledby='navbarDropdown'>
                            
                            <a class='dropdown-item' href='/user'>Danh sách tài khoản</a>
                            <a class='dropdown-item' href='/enrollment'>Danh sách đăng kí khóa học</a>
                            <a class='dropdown-item' href='/example'>Danh sách bài học</a>
                            <a class='dropdown-item' href='/unit'>Danh sách chương học</a>
                            <a class='dropdown-item' href='/learning/showList'>Danh sách khóa học</a>
                            <div class='dropdown-divider'></div>
                            <a class='dropdown-item' href='/me/stored/courses'>Khóa học của tôi</a>
                            <a class='dropdown-item' href='/banking/generate'>Ứng dựng QrCode</a>
                            <div class='dropdown-divider'></div>
                            <a id='logout-button' class='dropdown-item'>Đăng xuất</a>
                        </div>
                    </li>
                </ul>
            </div>
            {{else}}
            <div class='collapse navbar-collapse' id='navbarSupportedContent'>
                <ul class='navbar-nav ml-auto'>
                    <li class='nav-item dropdown'>
                        <a
                            class='nav-link dropdown-toggle'
                            href='#'
                            id='navbarDropdown'
                            role='button'
                            data-toggle='dropdown'
                            aria-haspopup='true'
                            aria-expanded='false'
                        >
                            <img
                                src='https://scontent.fhan2-3.fna.fbcdn.net/v/t39.30808-1/280348934_1002333543743548_7154129552959451706_n.jpg?stp=cp0_dst-jpg_p40x40&_nc_cat=102&ccb=1-7&_nc_sid=7206a8&_nc_ohc=Ai17CyZvED4AX8OC8nQ&_nc_ht=scontent.fhan2-3.fna&oh=00_AfDlSnDEgF_jTbEbbSqWZGtSLm3sAZNTWCnLxMdwek1eKA&oe=643DCB29'
                                alt=''
                                class='user-avatar'
                            />
                            {{loggedInUser.username}}
                        </a>
                        <div
                            class='dropdown-menu'
                            aria-labelledby='navbarDropdown'
                        >
                           
                            <a
                                id='logout-button'
                                class='dropdown-item'
                                href=''
                            >Đăng xuất</a>
                        </div>
                    </li>
                </ul>
            </div>
            {{/if}}
        {{else}}

        {{/if}}
    </div>
</nav>
<script>
  const logoutButton = document.getElementById('logout-button')
logoutButton.addEventListener('click', async () => {
  try {
    const response = await fetch('/auth/logout', {
      method: 'POST',
      credentials: 'include'
    })
    const data = await response.json()
    console.log(data) // "Logged out !"
    // redirect to login page or update UI
    window.location.href = "/auth/login"
  } catch (error) {
    console.error(error)
  }
})
</script>